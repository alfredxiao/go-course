package main

import (
	"bytes"
	"testing"
)

func TestMainOutput(t *testing.T) {
	var buf bytes.Buffer
	out = &buf

	main()

	expected := "1\n1\n2\n3\n5\n8\n13\n"
	actual := buf.String()

	if expected != actual {
		t.Errorf("Unexpected output in main()")
	}
}

func TestNegativeFibo(t *testing.T) {
	var buf bytes.Buffer
	out = &buf

	Fib(-7)
	expected := "1\n-1\n2\n-3\n5\n-8\n13\n"
	actual := buf.String()

	if expected != actual {
		t.Errorf("Unexpected output in main()")
	}
}
func TestFiboZero(t *testing.T) {
	var buf bytes.Buffer
	out = &buf

	Fib(0)
	expected := "0\n"
	actual := buf.String()

	if expected != actual {
		t.Errorf("Unexpected output in main()")
	}
}

func TestPositiveFiboMaxVal(t *testing.T) {
	var buf bytes.Buffer
	out = &buf

	Fib(95)
	expected := "92 is max positive fibonacci series.\n1\n1\n2\n3\n5\n8\n13\n21\n34\n55\n" +
		"89\n144\n233\n377\n610\n987\n1597" +
		"\n2584\n4181\n6765\n10946\n17711\n28657\n46368\n75025\n121393\n196418\n317811" +
		"\n514229\n832040\n1346269\n2178309\n3524578\n5702887\n9227465\n14930352\n24157817\n" +
		"39088169\n63245986\n102334155\n165580141\n267914296\n433494437\n701408733\n1134903170" +
		"\n1836311903\n2971215073\n4807526976\n7778742049\n12586269025\n20365011074\n32951280099\n" +
		"53316291173\n86267571272\n139583862445\n225851433717\n365435296162\n591286729879\n956722026041" +
		"\n1548008755920\n2504730781961\n4052739537881\n6557470319842\n10610209857723\n17167680177565\n" +
		"27777890035288\n44945570212853\n72723460248141\n117669030460994\n190392490709135\n308061521170129" +
		"\n498454011879264\n806515533049393\n1304969544928657\n2111485077978050\n3416454622906707" +
		"\n5527939700884757\n8944394323791464\n14472334024676221\n23416728348467685\n37889062373143906\n" +
		"61305790721611591\n99194853094755497\n160500643816367088\n259695496911122585\n420196140727489673" +
		"\n679891637638612258\n1100087778366101931\n1779979416004714189\n2880067194370816120\n" +
		"4660046610375530309\n7540113804746346429\n"

	actual := buf.String()

	if expected != actual {
		t.Errorf("Unexpected output in main()")
	}
}

func TestNegativeFiboMaxVal(t *testing.T) {
	var buf bytes.Buffer
	out = &buf

	Fib(-100)
	expected := "-92 is max negative fibonacci series.\n1\n-1\n2\n-3\n5\n-8\n13\n-21\n34\n-55\n89" +
		"\n-144\n233\n-377\n610\n-987\n1597\n-2584\n" +
		"4181\n-6765\n10946\n-17711\n28657\n-46368\n75025\n-121393\n196418\n-317811\n514229\n-832040\n1346269\n" +
		"-2178309\n3524578\n-5702887\n9227465\n-14930352\n24157817\n-39088169\n63245986\n-102334155\n165580141\n" +
		"-267914296\n433494437\n-701408733\n1134903170\n-1836311903\n2971215073\n-4807526976\n7778742049\n-12586269025\n" +
		"20365011074\n-32951280099\n53316291173\n-86267571272\n139583862445\n-225851433717\n365435296162\n-591286729879\n" +
		"956722026041\n-1548008755920\n2504730781961\n-4052739537881\n6557470319842\n-10610209857723\n17167680177565\n" +
		"-27777890035288\n44945570212853\n-72723460248141\n117669030460994\n-190392490709135\n308061521170129\n" +
		"-498454011879264\n806515533049393\n-1304969544928657\n2111485077978050\n-3416454622906707\n5527939700884757\n" +
		"-8944394323791464\n14472334024676221\n-23416728348467685\n37889062373143906\n-61305790721611591\n" +
		"99194853094755497\n-160500643816367088\n259695496911122585\n-420196140727489673\n679891637638612258\n" +
		"-1100087778366101931\n1779979416004714189\n-2880067194370816120\n4660046610375530309\n" +
		"-7540113804746346429\n"

	actual := buf.String()

	if expected != actual {
		t.Errorf("Unexpected output in main()")
	}
}
